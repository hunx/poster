/*! @overbool/poster v1.0.1 | (c) 2019 Overbool | https://github.com/overbool/poster */
"use strict";var poster=function(){var g=!1,v=768;function y(t,e,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"none",n=document.createElement(t);return n.setAttribute(e,i),n.style.display=o,n.width=v,n}function w(t,e,i){var o=t.getContext("2d");t.height=parseInt(e.font.match(/\d+/),10)+20,o.font=e.font,o.fillStyle=e.color;for(var n=0,l=0,r=!(o.textBaseline="top"),a=0;a<i.length;a++)if((n+=o.measureText(i[a]).width)>t.width-60){r=!0,l=a;break}var h=30;r&&(i=i.substring(0,l),h=t.width/2-n/2),g&&(o.strokeStyle="#6fda92",o.strokeRect(0,0,t.width,t.height)),"center"===e.position?(o.textAlign="center",o.fillText(i,t.width/2,0)):"left"===e.position?o.fillText(i,h,0):(o.textAlign="right",o.fillText(i,t.width-h,0))}function x(t,e,i){var o=t.getContext("2d"),n=parseInt(e.font.match(/\d+/),10);g&&(o.strokeStyle="#6fda92",o.strokeRect(0,0,t.width,t.height)),o.font=e.font,o.fillStyle=e.color,o.textBaseline="top";var l=0;l=(o.textAlign="center")===e.position?t.width/2:"left"===e.position?(o.textAlign="left",60):(o.textAlign="right",t.width-60);for(var r=0,a=0,h=0,c=0;c<i.length;c++)(r+=o.measureText(i[c]).width)>t.width-120&&(o.fillText(i.substring(a,c),l,h),h+=n*e.lineHeight,r=0,a=c),c===i.length-1&&o.fillText(i.substring(a,c+1),l,h)}return{init:function(o){var n=document.querySelector(o.selector);n.style.border="1px solid #f0f0f0";var l=y("div","id","wrapper"),r=y("canvas","id","canvas","block"),a=y("canvas","id","day"),h=y("canvas","id","date"),c=y("canvas","id","title"),g=y("canvas","id","content"),d=y("canvas","id","logo"),s=y("canvas","id","description");!function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];i.forEach(function(t){e.appendChild(t)})}(l,r,a,h,c,g,d,s),n.appendChild(l);var t=new Date;w(a,{font:"italic bold 70px Arial",color:"rgba(255, 255, 255, 1)",position:"right"},t.getDate()),w(h,{font:"italic 30px Arial",color:"rgba(255, 255, 255, 1)",position:"right"},t.getFullYear()+" / "+(t.getMonth()+1));var e={font:"bold 50px Arial",color:"rgba(66, 66, 66, 1)",position:"center"};e.font=o.titleStyle&&o.titleStyle.font||e.font,e.color=o.titleStyle&&o.titleStyle.color||e.color,e.position=o.titleStyle&&o.titleStyle.position||e.position,w(c,e,o.title);var i={font:"24px Arial",lineHeight:1.5,position:"center",color:"rgba(88, 88, 88, 1)"};i.font=o.contentStyle&&o.contentStyle.font||i.font,i.color=o.contentStyle&&o.contentStyle.color||i.color,i.lineHeight=o.contentStyle&&o.contentStyle.lineHeight||i.lineHeight,i.position=o.contentStyle&&o.contentStyle.position||i.position,x(g,i,o.content);var f={font:"bold 40px Roboto Slab",position:"center",color:"rgba(0, 0, 25, 1)"};f.color=o.logoStyle&&o.logoStyle.color||f.color,w(d,f,o.logo),x(s,{font:"24px Arial",color:"rgba(180, 180, 180, 1)",lineHeight:1.1,position:"center"},o.description);var p=new Image;r.width=v,r.height=1168,p.src=o.banner,p.onload=function(){var t=r.getContext("2d");t.fillStyle="rgba(255, 255, 255, 1)",t.fillRect(0,0,r.width,r.height),t.drawImage(p,0,0,r.width,r.height/2),t.drawImage(a,0,r.height/2-120),t.drawImage(h,0,r.height/2-50),t.drawImage(c,0,r.height/2+90),t.drawImage(g,0,r.height/2+200),t.drawImage(d,0,r.height-d.height-30),t.drawImage(s,0,r.height-s.height+30),t.strokeStyle="rgba(122, 122, 122, 0.5)",t.setLineDash([5,6]),t.moveTo(0,r.height/2+400),t.lineTo(768,r.height/2+400),t.stroke();var e=new Image;e.src=r.toDataURL("image/png");var i=o.radio||.7;e.width=v*i,e.height=1168*i,t.clearRect(0,0,r.width,r.height),r.style.display="none",n.appendChild(e),n.removeChild(l),o.callback&&o.callback(n)}}}}();